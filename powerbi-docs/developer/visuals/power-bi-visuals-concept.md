---
title: Power BI のビジュアルの概念
description: この記事では、ビジュアルと Power BI の統合方法について説明します
author: zBritva
ms.author: v-ilgali
manager: rkarlin
ms.reviewer: sranins
ms.service: powerbi
ms.subservice: powerbi-custom-visuals
ms.topic: conceptual
ms.date: 06/18/2019
ms.openlocfilehash: 36742917829013a6efca9d74f88b01bc686437a8
ms.sourcegitcommit: f77b24a8a588605f005c9bb1fdad864955885718
ms.translationtype: HT
ms.contentlocale: ja-JP
ms.lasthandoff: 12/02/2019
ms.locfileid: "74700848"
---
# <a name="power-bi-visual-concept"></a>Power BI のビジュアルの概念

この記事では、ユーザーおよびビジュアルと Power BI との対話の方法と、ユーザーが Power BI ビジュアルとやりとりする方法について説明します。 この図は、どのアクションがビジュアルに直接作用し、どのアクションが Power BI を介して (たとえば、ユーザーがブックマークを選択した場合) 作用するかを示しています。

![Power BI ビジュアル](./media/visual-concept.svg)

## <a name="the-visual-gets-update-from-power-bi"></a>ビジュアルは Power BI から更新を受け取る

ビジュアルには `update` メソッドがあり、このメソッドには通常、ビジュアルのメイン ロジックが含まれています。そのロジックにより、グラフのレンダリングやデータの視覚化が行われます。

多くの更新で `update` メソッドが呼び出されます。

### <a name="user-interacts-with-visual-through-power-bi"></a>ユーザーが Power BI を使用して行うビジュアルの操作

* ユーザーがビジュアルのプロパティ パネルを開く。

    Power BI によって、ビジュアルの `capabilities.json` からサポートされているオブジェクトとプロパティがフェッチされ、プロパティの実際の値を受け取るために、Power BI でビジュアルの `enumerateObjectInstances` メソッドが呼び出されます。

    ビジュアルからプロパティの実際の値が返される必要があります。

    詳細については、[ビジュアルの機能に関する記事](capabilities.md)を参照してください。

* ユーザーが書式パネルで[ビジュアルのプロパティを変更](../../visuals/power-bi-visualization-customize-title-background-and-legend.md)する。

    プロパティの値を変更後、Power BI によってビジュアルの `update` メソッドが呼び出され、新しい `options` がオブジェクトの新しい値と共に update メソッドに渡されます。

    詳細については、[ビジュアルのオブジェクトとプロパティに関する記事](objects-properties.md)を参照してください。

* ユーザーがビジュアルのサイズを変更する。

    ユーザーがビジュアルのサイズを変更すると、新しい `option` オブジェクトを使用した `update` メソッドが Power BI によって呼び出されます。 オプションには、ビジュアルの新しい幅と高さを指定する `viewport` オブジェクトが入れ子になっています。

* ユーザーがレポート レベル、ページ レベル、またはビジュアル レベルのフィルターを適用する。

    Power BI でフィルター条件に従ってデータがフィルター処理され、ビジュアルの `update` メソッドを呼び出してビジュアルに新しいデータが提供されます。

    ビジュアルにより、入れ子になったいずれかのオブジェクトの新しいデータを使用した `options` の新しい更新が取得されます。 これはビジュアルのデータ ビュー マッピング構成に依存します。

    詳細については、[データ ビュー マッピングに関する記事](dataview-mappings.md)を参照してください。

* ユーザーがレポートの別のビジュアルでデータ ポイントを選択する。

    選択したデータ ポイントが Power BI によってフィルター処理または強調表示され、ビジュアルの `update` メソッドが呼び出されます。

    ビジュアルによって、フィルター処理された新しいデータまたは強調表示の配列を含む同じデータが取得されます。

    詳細については、[ビジュアルでデータを強調表示する方法に関する記事](highlight.md)を参照してください。

* ユーザーがレポートのブックマーク パネルでブックマークを選択する。

    次の 2 つのアクションが発生する可能性があります。

    1. Power BI に渡された関数 (`registerOnSelectionCallback` メソッドで登録されたもの) が呼び出され、対応するブックマークの選択の配列がコールバック関数で取得されます。

    2. Power BI によって、`options` の内部に対応するフィルター オブジェクトを持つ `update` メソッドが呼び出されます。

    どちらの場合も、受け取った選択またはフィルター オブジェクトに応じて、視覚化の状態をビジュアルで変更する必要があります。

    ブックマークの詳細については、[ブックマークの処理方法に関する記事](filter-api.md)を参照してください。

    フィルターの詳細については、[Power BI ビジュアルで他のビジュアルのデータをフィルター処理する方法に関する記事](filter-api.md)を参照してください。

### <a name="user-interacts-with-visual-directly"></a>ユーザーとビジュアルの直接対話

* ユーザーがデータ要素にマウス ポインターを置く

    ビジュアルで Power BI Tooltips API を使用して、データ ポイントに関する追加情報を表示できます。
    ユーザーがビジュアル要素にマウス ポインターを置いたときに、ビジュアルによってイベントを処理し、ヒント要素上にデータを表示できます。

    ビジュアルで標準のヒントまたはレポート ページのヒントを表示できます。

    詳細については、[ヒントを追加する方法](add-tooltips.md)のガイドを参照してください。

* ユーザーがビジュアルのプロパティを変更する (例: ユーザーがツリーを展開し、ビジュアルのプロパティに状態が保存される)

    Power BI API を使用してビジュアルにプロパティ値を保存できます。 例として、ユーザーがビジュアルを操作する場合があります。 すると、ビジュアルでプロパティ値を保存または更新する必要があります。 そのためにビジュアルで `presistProperties` メソッドを呼び出すことができます。

* ユーザーが URL リンクをクリックする。

    既定では、ビジュアルで URL を開くことはできません。 新しいタブで URL を開くには、ビジュアルで `launchURL` メソッドを呼び出し、パラメーターとして URL を渡す必要があります。

    詳細については、[URL API の起動](launch-url.md)に関する記事を参照してください。

* ユーザーがビジュアルを介してフィルターを適用する

    ビジュアルによって `applyJSONFilter` が呼び出され、他のビジュアルのデータをフィルター処理するためのフィルター条件が渡されます。

    ビジュアルではいくつかの種類のフィルターを使用できます。たとえば、基本フィルター、詳細フィルター、タプル フィルターなどです。

    フィルターの詳細については、[Power BI ビジュアルで他のビジュアルのデータをフィルター処理する方法に関する記事](filter-api.md)を参照してください。

* ユーザーがビジュアル上で要素をクリックまたは選択する。

    選択の詳細については、[ビジュアルの対話機能](selection-api.md)に関する記事を参照してください。

### <a name="the-visual-interacts-with-power-bi"></a>ビジュアルと Power BI との対話

* ビジュアルで、より多くのデータを Power BI に要求します。

    ビジュアルでデータを部分ごとに処理できます。 FetchMoreData API メソッドでデータセットの次のフラグメントを要求します。

    `fetchMoreData` の詳細については、[より多くのデータを Power BI からフェッチする方法](fetch-more-data.md)に関する記事を参照してください。

* イベント サービス

    Power BI を使用すると、レポートを PDF にエクスポートしたり、電子メールで送信したりすることができます (認定済みのビジュアルのみがサポートされています)。 レンダリングが完了し、PDF または電子メールをキャプチャする準備ができたことを Power BI に通知するには、ビジュアルで Rendering Events API を呼び出す必要があります。

    詳細については、[Power BI から PDF へのレポートのエクスポートに関する記事](../../consumer/end-user-pdf.md)を参照してください。

    イベント サービスの詳細については、[こちら](event-service.md)を参照してください。

## <a name="next-steps"></a>次の手順

独自の視覚エフェクトを作成して AppSource に追加することに興味がある Web 開発者の方は、 「[Power BI のビジュアルを開発する](./custom-visual-develop-tutorial.md)」を参照し、[Power BI ビジュアルを AppSource に発行する](../office-store.md)方法を学習してください。
